# 链表

链表的实际用途非常广泛，但是一般业务代码不会涉及。一般都在操作系统里，例如文件系统、内存分配；还有哈希表中，
可以用来解决冲突（key冲突时使用链表或者数组来保存）；实现跳跃表等等。

## 链表结构和特征

首先我们来看看链表的结构。链表根据结构通常分为单向链表和双向链表，因为链表中总是有一个地方存储下
一个节点的位置，因此我们抽象来看，它是有方向的。只存储下一个或上一个节点位置的链表，我们称之为单向
链表，既存储上一个节点位置，又存储下一个节点位置的链表，我们称之为双向链表。

![linked list](./img/linked_list.png)

## 链表和数组的对比

链表和数组，都是用来存储一批数据的，那么链表和数组有什么不同之处呢？我们回顾一下，数组的结构是这样的：

![array]()

可以明显的看出来，数组中，每一个元素都是互相挨着的，也就是说，它们是相邻的。当然，数组中的节点也可以
是不相邻的，即中间有很多地方没有填充元素，是一个个的空洞，但是我们一般不会这样用：

![array with holes]()

原因是特别浪费空间，为了存储1和101，中间有99个元素空间是空着的，而这种场景就特别适合链表，用链表来
表示节点的话，尽管会多了一个（如果是单项链表的话）或两个（如果是双向链表的话）指针的空间，但是仍然
比数组来表示更加节省空间。

![linked list]()

也就是说，链表比数组更加适合用来存储不相邻的、零散的数据，而数组更适合用来存储连续的数据。除此之外，
试着想象一下，如果在数组中插入一个元素，我们需要怎么操作？答案是，我们需要先找到位置，然后把该元素
及其后的元素整体往后搬，然后再把该元素写入。

![insert into array]()

而链表则不是，找到位置之后，新建一个节点，把元素的值存储到该节点，之后更改前后节点的指针的值即可。

![insert into linked list]()

链表和数组还有很多的不同，如果有兴趣的话，可以看参考资料中的链表vs数组，而我们在这一节中，只要记住
链表和数组最大的不同之处，就在于链表适合用来存储零散的数据，而数组适合存储连续的数据。

## 链表的使用

Python中的list是链表实现吗？不是。事实上，Python中的list是用数组实现的：

```c
```

这也就意味着，list的追加性能很高，因为只要在变长数组的最后，追加一个元素即可，但是，如果是在最左侧
插入一个元素呢？根据上一节的描述可以知道，性能非常低，因此我们要把数组原本的n个元素往后搬，然后才
插入（当然，一般实现都会用memmove，但是性能仍然有问题），而Python中如果需要频繁的进行 `lpop`, `lpush`
此类的操作，会推荐使用 `deque`，`deque` 就是用链表实现的。

```c
```

可以看出来，`deque` 是一个双链表，每当(TODO)。。。

## 总结

这一篇中我们先从链表的结构看起，随后对比了链表和数组的区别，分别适用何种场景，最后我们
描述了链表在实际项目中的使用，除了我们所说的例子(`deque`)，实际项目中还有很多使用链表的
地方，例如Linux内核中就有很多地方使用，我们只是采取了一个简单而又具体的例子来看链表在实际项目中的使用。

---

参考资料：

- [链表vs数组(英文)](https://www.geeksforgeeks.org/linked-list-vs-array/)
