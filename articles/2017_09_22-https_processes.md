# HTTPS 的详细流程

> 之前有专门研究了一下HTTPS的具体工作流程，不过因为不是天天需要回忆，很快就忘了
> 所以现在专门写一篇博客记录下来，不过内容翻译自 [这里](http://blogs.getcertifiedgetahead.com/understanding-https-process-security/)

- 用户点击HTTPS链接，用户所在的浏览器发起请求
- 服务器响应，发送公钥
- 浏览器接受公钥，然后生成一个随机的密码，并且用公钥加密
- 浏览器把加密后的key发送给服务器
- 服务器用私钥解密
- 此后所有的流量都用哪个密码来加密解密

其中原文里没有提到，我想提一下的几个点：

- 上面没有提到的流程，其中有服务器在发送公钥的时候一般会发送支持的加密算法，浏览器收到后会检查自己支持的加密算法，
然后选择一个，然后加密，并且告诉服务器自己用的是啥算法

- 浏览器会校验服务器发过来的公钥是否是经过认证的，这个认证就是体现在浏览器的小绿锁上，即传说中的CA，由世界上
好几个大公司联合组成一个组织专门负责，然后浏览器厂商选择性相信，比如wosign的证书Chrome就不信，但是letsencrypt的
证书大家都信。
